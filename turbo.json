{
	"$schema": "https://turbo.build/schema.json",
	"globalDependencies": [
		".env*",
		"pnpm-lock.yaml",
		"pnpm-workspace.yaml",
		"package.json",
		"turbo.json",
		"tsconfig.json",
		"eslint.config.*"
	],
	"globalEnv": ["NODE_ENV", "CI", "BUILD_ENV"],
	"tasks": {
		"clean": { 
			"cache": false 
		},
		"build": {
			"dependsOn": ["^build"],
			"inputs": [
				"src/**/*.{ts,js,vue,jsx,tsx}",
				"src/**/*.{json,scss,css}",
				"assets/**/*",
				"public/**/*",
				"tsconfig*.json",
				"package.json",
				"*.config.{js,mjs,cjs,ts,json}",
				"scripts/**/*.{js,mjs,ts}",
				"!src/**/*.{test,spec}.{ts,js}",
				"!src/**/__tests__/**",
				"!src/**/__mocks__/**",
				"!**/*.md",
				"!README*",
				"!CHANGELOG*"
			],
			"outputs": [
				"dist/**",
				"build/**",
				"lib/**",
				"types/**",
				"*.tsbuildinfo"
			],
			"cache": true,
			"persistent": false,
			"passThroughEnv": ["NODE_ENV", "CI", "BUILD_ENV"],
			"outputLogs": "hash-only"
		},
		"typecheck": {
			"dependsOn": ["^typecheck"],
			"inputs": [
				"src/**/*.{ts,tsx,vue}",
				"tsconfig*.json",
				"package.json",
				"!src/**/*.{test,spec}.{ts,tsx}",
				"!src/**/__tests__/**",
				"!src/**/__mocks__/**"
			],
			"outputs": [
				"dist/**/*.tsbuildinfo",
				"*.tsbuildinfo"
			],
			"cache": true,
			"passThroughEnv": ["NODE_ENV", "TS_NODE_PROJECT"],
			"outputLogs": "errors-only"
		},
		"build:incremental": {
			"dependsOn": ["^typecheck"],
			"inputs": [
				"src/**/*.{ts,js,vue,jsx,tsx}",
				"src/**/*.{json,scss,css}",
				"tsconfig*.json",
				"package.json",
				"!src/**/*.{test,spec}.{ts,js}",
				"!src/**/__tests__/**",
				"!src/**/__mocks__/**"
			],
			"outputs": [
				"dist/**",
				"*.tsbuildinfo"
			],
			"cache": true,
			"persistent": false,
			"passThroughEnv": ["NODE_ENV", "CI", "BUILD_ENV"],
			"outputLogs": "hash-only"
		},
		"format": {
			"inputs": [
				"src/**/*.{ts,js,vue,jsx,tsx}",
				"src/**/*.{json,scss,css,md}",
				"test/**/*.{ts,js}",
				"biome.json",
				".prettierrc*",
				"package.json"
			],
			"cache": true,
			"passThroughEnv": ["NODE_ENV"]
		},
		"format:check": {
			"inputs": [
				"src/**/*.{ts,js,vue,jsx,tsx}",
				"src/**/*.{json,scss,css,md}",
				"test/**/*.{ts,js}",
				"biome.json",
				".prettierrc*",
				"package.json"
			],
			"cache": true,
			"passThroughEnv": ["NODE_ENV"]
		},
		"lint": {
			"dependsOn": ["@n8n/eslint-config#build"],
			"inputs": [
				"src/**/*.{ts,js,vue,jsx,tsx}",
				"test/**/*.{ts,js}",
				"eslint.config.*",
				".eslintrc*",
				"package.json",
				"tsconfig*.json",
				"!src/**/__mocks__/**",
				"!**/*.d.ts"
			],
			"cache": true,
			"passThroughEnv": ["NODE_ENV", "ESLINT_USE_FLAT_CONFIG"],
			"outputLogs": "hash-only"
		},
		"lint:fix": {
			"dependsOn": ["@n8n/eslint-config#build"],
			"inputs": [
				"src/**/*.{ts,js,vue,jsx,tsx}",
				"test/**/*.{ts,js}",
				"eslint.config.*",
				".eslintrc*",
				"package.json",
				"tsconfig*.json",
				"!src/**/__mocks__/**"
			],
			"cache": false,
			"passThroughEnv": ["NODE_ENV", "ESLINT_USE_FLAT_CONFIG"]
		},
		"lint:styles": {
			"dependsOn": ["@n8n/stylelint-config#build"]
		},
		"lint:styles:fix": {
			"dependsOn": ["@n8n/stylelint-config#build"]
		},
		"test": {
			"dependsOn": [],
			"inputs": [
				"src/**/*.{ts,js,jsx,tsx}",
				"test/**/*.{ts,js}",
				"**/__tests__/**/*.{ts,js}",
				"**/*.{test,spec}.{ts,js}",
				"jest.config.*",
				"vitest.config.*",
				"package.json",
				"tsconfig*.json",
				"!**/*.d.ts",
				"!test/**/*integration*.{ts,js}",
				"!test/**/*e2e*.{ts,js}",
				"!**/*.integration.{test,spec}.{ts,js}",
				"!**/*.e2e.{test,spec}.{ts,js}"
			],
			"outputs": [
				"coverage/**",
				"*.xml",
				"test-results/**",
				"junit.xml"
			],
			"env": ["NODE_ENV"],
			"cache": true,
			"passThroughEnv": ["DATABASE_URL", "N8N_LOG_LEVEL", "JEST_JUNIT_CLASSNAME"],
			"outputLogs": "errors-only"
		},
		"test:unit": {
			"dependsOn": [],
			"inputs": [
				"src/**/*.{ts,js,jsx,tsx}",
				"test/**/*.{ts,js}",
				"**/__tests__/**/*.{ts,js}",
				"**/*.{test,spec}.{ts,js}",
				"jest.config.*",
				"vitest.config.*",
				"package.json",
				"tsconfig*.json",
				"!**/*.d.ts"
			],
			"outputs": [
				"coverage/**",
				"*.xml",
				"test-results/**",
				"junit.xml"
			],
			"env": ["NODE_ENV"],
			"cache": true,
			"passThroughEnv": ["DATABASE_URL", "N8N_LOG_LEVEL", "JEST_JUNIT_CLASSNAME"],
			"outputLogs": "errors-only"
		},
		"test:integration": {
			"dependsOn": ["^build:incremental"],
			"inputs": [
				"src/**/*.{ts,js,jsx,tsx}",
				"test/**/*integration*.{ts,js}",
				"test/**/*e2e*.{ts,js}",
				"**/*.integration.{test,spec}.{ts,js}",
				"**/*.e2e.{test,spec}.{ts,js}",
				"jest.config.*",
				"vitest.config.*",
				"package.json",
				"tsconfig*.json",
				"!**/*.d.ts"
			],
			"outputs": [
				"coverage/**",
				"*.xml",
				"test-results/**",
				"junit.xml"
			],
			"env": ["COVERAGE_ENABLED", "NODE_ENV", "CI"],
			"cache": true,
			"passThroughEnv": ["DATABASE_URL", "N8N_LOG_LEVEL", "JEST_JUNIT_CLASSNAME"]
		},
		"test:ci": {
			"dependsOn": ["build:incremental"],
			"inputs": [
				"src/**/*.{ts,js,jsx,tsx}",
				"test/**/*.{ts,js}",
				"**/__tests__/**/*.{ts,js}",
				"**/*.{test,spec}.{ts,js}",
				"jest.config.*",
				"vitest.config.*",
				"package.json",
				"tsconfig*.json",
				"!**/*.d.ts"
			],
			"outputs": [
				"coverage/**",
				"*.xml",
				"test-results/**",
				"junit.xml"
			],
			"env": ["COVERAGE_ENABLED", "NODE_ENV", "CI"],
			"cache": true,
			"passThroughEnv": ["DATABASE_URL", "N8N_LOG_LEVEL", "JEST_JUNIT_CLASSNAME"]
		},
		"test:e2e": {
			"dependsOn": ["^build"],
			"inputs": [
				"cypress/**/*.{ts,js,json}",
				"playwright/**/*.{ts,js,json}",
				"e2e/**/*.{ts,js,json}",
				"test/**/*.e2e.{ts,js}",
				"cypress.config.*",
				"playwright.config.*",
				"package.json",
				"tsconfig*.json",
				"!cypress/screenshots/**",
				"!cypress/videos/**",
				"!playwright-report/**",
				"!test-results/**"
			],
			"outputs": [
				"cypress/screenshots/**",
				"cypress/videos/**", 
				"playwright-report/**",
				"test-results/**"
			],
			"env": ["NODE_ENV", "CI", "CYPRESS_RECORD_KEY"],
			"cache": false,
			"passThroughEnv": ["CYPRESS_*", "PLAYWRIGHT_*", "DATABASE_URL"],
			"outputLogs": "full"
		},
		"watch": { 
			"cache": false, 
			"persistent": true 
		},
		"dev": { 
			"cache": false, 
			"persistent": true 
		},
		"build:playwright": {
			"dependsOn": ["install-browsers:ci", "build"],
			"inputs": [
				"src/**/*.{ts,js}",
				"playwright/**/*.{ts,js,json}",
				"package.json",
				"playwright.config.*"
			],
			"outputs": ["dist/**"],
			"cache": true,
			"passThroughEnv": ["PLAYWRIGHT_BROWSERS_PATH", "CI"]
		},
		"install-browsers:ci": {
			"inputs": ["package.json", "pnpm-lock.yaml", "playwright.config.*"],
			"outputs": ["ms-playwright-cache/**"],
			"env": ["PLAYWRIGHT_BROWSERS_PATH", "CI"],
			"cache": true,
			"passThroughEnv": ["PLAYWRIGHT_BROWSERS_PATH"]
		},
		"install-browsers:local": {
			"inputs": ["package.json", "pnpm-lock.yaml", "playwright.config.*"],
			"cache": false,
			"passThroughEnv": ["PLAYWRIGHT_BROWSERS_PATH"]
		},
		"test:container:standard": {
			"dependsOn": ["install-browsers:local"],
			"env": ["E2E_TESTS"],
			"cache": false
		},
		"test:standard": {
			"dependsOn": ["install-browsers:local", "^build"],
			"inputs": [
				"playwright/**/*.{ts,js,json}",
				"e2e/**/*.{ts,js,json}",
				"package.json",
				"playwright.config.*",
				"tsconfig*.json"
			],
			"outputs": [
				"playwright-report/**",
				"test-results/**"
			],
			"cache": false,
			"passThroughEnv": ["PLAYWRIGHT_*", "CI", "DATABASE_URL", "N8N_LOG_LEVEL"],
			"outputLogs": "full"
		},
		"validate:build": {
			"dependsOn": ["^build"],
			"inputs": [
				"scripts/build-validation.mjs",
				"scripts/health-check.mjs",
				"turbo.json",
				"package.json",
				"dist/**",
				"build/**"
			],
			"outputs": [
				"build-validation-report.json", 
				"health-check-results.json"
			],
			"cache": true,
			"passThroughEnv": ["NODE_ENV", "CI"]
		},
		"health:check": {
			"inputs": [
				"scripts/health-check.mjs",
				"package.json",
				"turbo.json",
				"dist/**",
				"build/**"
			],
			"outputs": ["health-check-results.json"],
			"cache": true,
			"passThroughEnv": ["NODE_ENV"]
		}
	}
}